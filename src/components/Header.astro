---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove the first "/"
import Link from "./Link.astro";
import Text from "./Text.astro";
---

<header
  x-data="{ 
    showmenu: false,
    scrolled: false,
    init() {
      window.addEventListener('scroll', () => {
        this.scrolled = window.scrollY > 50;
      });
    }
  }"
  class="fixed w-full top-0 z-40 transition-all duration-500 ease-in-out bg-base-100 shadow-lg"
>
  <div class="navbar transition-all duration-500 ease-in-out" :class="scrolled ? 'py-2 items-center' : 'py-4 items-start'">
    <div class="navbar-start">
      <!-- Logo med secondary baggrund -->
      <div class="bg-secondary p-3 transition-all duration-500 ease-in-out" :class="scrolled ? '' : 'self-start'">
        <img src="/img/Logo/LogoWhite.webp" alt="Abortkampen logo" class="transition-all duration-500 ease-in-out" :class="scrolled ? 'h-8 w-auto' : 'h-20 w-auto'" />
      </div>

      <!-- Menu knap -->
      <button class="btn btn-ghost lg:hidden transition-all duration-500 ease-in-out" :class="scrolled ? '' : 'self-start'" x-on:click="showmenu = !showmenu">
        <Text teksttype="body" weight="bold" color="body">MENU</Text>
      </button>

      <!-- Desktop navigation - skjult på mobil -->
      <div class="hidden lg:flex items-center gap-4 transition-all duration-500 ease-in-out" :class="scrolled ? '' : 'self-start'">
        <Link variant="textlink" href="/omos" color="body" class={currentPath === "omos/" || currentPath === "omos" ? "text-secondary !font-bold" : ""}> Om os </Link>
        <div class="w-px md:h-4 bg-base-content opacity-30"></div>
        <Link variant="textlink" href="/engagerdig" color="body" class={currentPath === "engagerdig/" || currentPath === "engagerdig" ? "text-secondary !font-bold" : ""}> Engager dig </Link>
        <div class="w-px md:h-4 bg-base-content opacity-30"></div>
        <Link variant="textlink" color="body" href="https://www.sexogsamfund.dk/">Sex og samfund</Link>
      </div>
    </div>

    <!-- Mobile menu -->
    <div class="absolute top-full left-0 w-full bg-accent shadow-lg z-50 lg:hidden" x-show="showmenu" x-transition x-on:click.away="showmenu = false">
      <ul class="menu p-4">
        <li class="mb-2">
          <Link variant="textlink" href="/omos" color="body" class={currentPath === "omos/" || currentPath === "omos" ? "text-secondary !font-bold" : ""}> Om os </Link>
        </li>
        <li class="mb-2">
          <Link variant="textlink" href="/engagerdig" color="body" class={currentPath === "engagerdig/" || currentPath === "engagerdig" ? "text-secondary !font-bold" : ""}> Engager dig </Link>
        </li>
        <li class="mb-2">
          <Link variant="textlink" color="body" href="https://www.sexogsamfund.dk/"> Sex og samfund </Link>
        </li>
      </ul>
    </div>

    <div class="navbar-end">
      <Link variant="linkbutton" href="/stot"> STØT </Link>
      <div class="ml-4 flex flex-row md:gap-4 gap-6 items-center">
        <img src="/img/Icons/Search.webp" alt="søgeikon" class="md:h-8 h-6" />
        <img src="/img/Icons/Heart.webp" alt="like" class="md:h-8 h-6" />
        <img src="/img/Icons/Shoppingcart.webp" alt="indkøbskurv" class="md:h-8 h-6" />
      </div>
    </div>
  </div>
</header>
