---
import CartButton from "./CartButton.astro";
import Text from "./Text.astro";

// Henter parametrene fra Astro.props
const {
  imageSrc = "",
  imageAlt = "",
  title = "Card Title",
  pris = "",
  buttonText = "Buy Now",
  showBadge = false,
  badgeText = "Primary",
  badgeColor = "badge-primary",
  quantity = 1,
} = Astro.props;
---

<div
  class="card md:w-90 w-60 rounded-none"
  x-data="{
    open: false,
    show() {
      this.open = true
      setTimeout(() => this.open = false, 5000)
    }
  }"
>
  <figure class="relative">
    <img
      src={imageSrc}
      alt={imageAlt}
      class="md:h-100 h-auto md:w-full object-cover rounded-none"
    />

    <!-- Like heart i øverste højre hjørne -->
    <button
      class="absolute top-4 right-4 p-2 transition-all duration-200"
      x-data="{ liked: false }"
      x-on:click="liked = !liked"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        stroke-width="1.5"
        class="size-8 transition-all duration-200 stroke-primary"
        x-bind:class="liked ? 'fill-primary' : 'fill-none'"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
        ></path>
      </svg>
    </button>

    <!-- Badge i nederste venstre hjørne -->
    {
      showBadge && (
        <div
          class={`badge ${badgeColor} absolute bottom-4 left-0 rounded-r-lg rounded-l-none`}
        >
          {badgeText}
        </div>
      )
    }
  </figure>

  <div class="flex md:flex-row flex-col justify-between md:items-center p-4">
    <Text teksttype="Headline" weight="bold">{title}</Text>
    <Text teksttype="body" weight="regular">{pris}</Text>
  </div>

  <div class="card-actions justify-end">
    <CartButton variant="secondary">{buttonText}</CartButton>
  </div>

  <!-- CART TOAST / OVERLAY -->
  <div class="fixed top-25 -right-10 z-50">
    <div
      x-show="open"
      x-transition:enter="transition transform ease-out duration-1500"
      x-transition:enter-start="translate-x-full opacity-0"
      x-transition:enter-end="translate-x-0 opacity-100"
      x-transition:leave="transition transform ease-in duration-2000"
      x-transition:leave-start="translate-x-0 opacity-100"
      x-transition:leave-end="translate-x-full opacity-0 "
      class="modal-box flex gap-10 max-w-xl outline-3 outline-secondary"
    >
      <!-- Billede -->
      <div class="flex-shrink-0">
        <img src={imageSrc} alt={imageAlt} class="w-32 h-auto" />
      </div>

      <!-- Tekst -->
      <div class="flex flex-col items-end text-right pr-8 w-full">
        <Text teksttype="Headline" weight="bold"> Tilføjet til kurv </Text>

        <div class="h-2 w-30 bg-secondary rounded-full mt-4 mb-4"></div>

        <Text teksttype="body">{title}</Text>
        <Text teksttype="body">{pris}</Text>
        <Text teksttype="body">Antal: {quantity}</Text>
      </div>
    </div>
  </div>
</div>
